## 챕터11 API 리팩토링

### 질의 함수와 변경 함수 분리하기
한 함수 안에 질의 함수와 변경 함수가 함께 있다면 분리한다.
질의 함수(읽기 함수)는 모두 부수효과가 없어야한다. -> 명령-질의 분리

### 함수 매개변수화하기
두 함수의 로직이 비슷하고 단지 리터럴 값만 다르다면, 그 다른 값을 매개변수로 받아 처리하여 함수를 하나로 합침
매개변수 값만 바뀌어 여러곳에 사용할 수 있음

### 플래그 인수 제거하기
플래그 인수가 다중으로 있을 경우, 호출 할 수 있는 함수들이 무엇이고 어떻게 호출해야하는지 헷갈림
때문에 아예 함수를 분리(조건문 분해하기 적용)하여 플래그 인수를 없애는 방법이 효율

### 객체 통째로 넘기기
하나의 레코드에서 값 두어 개를 가져와 인수로 넘기는 대신 레코드를 통으로 넘기는 방법
(로직 중복을 없앨 수도 있다.)
매개 변수 객체 만들기를 선행하고 새로운 객체로 묶은 후 적용하는 것이 좋다.
한편, 한 객체가 제공하는 기능 중 항상 똑같은 일부만을 사용하는 코드가 많다면, 그 기능만 따로 묶어서 클래스로 추출하라는 신호일 수 있음


### 매개변수를 질의 함수로 바꾸기
매개변수 목록은 함수의 변동 요인을 모아놓은 곳, 함수의 동작에 변화를 줄 수 있는 일차적 수단. 중복을 피하는 것이 좋으며, 짧을수록 이해하기 쉽다.

* 대상 함수가 참조 투명해야 한다는 것(순수 함수)

### 질의 함수를 매개변수로 바꾸기
매개변수를 질의 함수로 바꾸기의 반대
코드의 의존 관계를 바꿀 때 벌어진다. 예를 들어 대상 함수가 더 이상 (매개변수화하려는) 특정 원소에 의존하길 원치 않을 때 리팩토링 발생

### 세터 제거하기
무조건 접근자 메서드를 통해서만 필드를 다루려 할 때
클라이언트에서 생성 스크립트를 사용해 객체를 생성할 때

### 생성자를 팩터리 함수로 바꾸기
생성자는 객체를 초기화하는 특별한 용도의 함수, 하지만 생성자는 일반함수에 없는 이상한 제약이 따라 붙는다. (서브 클래스의 인스턴스나 프락시를 반환할 수 없다.)
그러나 팩터리 함수는 이런 제약이 없다.


### 함수를 명령으로 바꾸기
그 함수만을 위한 객체 안으로 캡슐화하여 유용하게 사용
명령 객체는 평범한 함수 메커니즘보다 훨씬 유연하게 함수를 제어하고 표현 할 수있다.

최근에 중복되는 함수를 객체안으로 캡슐화하여서 리팩토링 했는데
그게 이 방법이구나

### 명령을 함수로 바꾸기
함수를 명령으로 바꾸기 반대
명령 객체는 복잡한 연산을 다를 수 있는 강력한 메커니즘을 제공한다.
하지만 명령의 능력은 공짜가 아니다. 로직이 크게 복잡하지 않다면 명령 객체는 장점보다 단점이 크니 평범한 함수로 바꿔주는 것이 좋다.

### 수정된 값 반환하기
데이터가 어떻게 수정되는지를 추적하는 일은 코드에서 이해하기 가장 어려운 부분 중 하나임.
때문에 함수에서 수정값을 반환하면 어디서 데이터가 어디서 갱신이 되었는지 명확함
하지만 값 여러개를 갱신하는 함수에는 효과적이지 않음

### 오류 코드를 예외로 바꾸기
예외는 독립적인 오류 처리 메커니즘 이다.
오류를 발견하고 예외를 던지면 적잘한 예외 핸들러를 찾을 때까지 콜스택을 타고 위로 전파한다. 예외를 사용하면 상단에서 모두 일일이 오류코드 검사할 필요 없다
예외는 정확히 예상 밖의 동작을 때만 쓰여야 한다.

### 예외를 사전확인으로 바꾸기
예외는 예외적으로 동작할때만 사용
함수 수행시 무제가 될 수 있는 조건을 함수 호출 전에 검사(validation)한다.

