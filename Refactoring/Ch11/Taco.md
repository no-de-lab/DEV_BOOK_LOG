## API 리팩터링
모듈과 함수가 소프트웨어 블록이라면, 이 블록을 끼워 맞추는 연결부는 api다. 
좋은 api는 데이터를 갱신하는 함수와 조회를 하는 함수를 명확히 구분한다. 

두 기능이 섞이면 분리해야한다. 

만약 필요 이상으로 분해된다면 객체 통째로 넘기가를 해야한다. 

### 1. 질의 함수와 변경 함수 분리하기
![Alt text](image.png)

외부에서 관찰할 수 있는 겉보기 부수효과가 없어야한다. (멱등하게)

겉보기라고 명명한 이유는, 캐시 때문이다. 안에서는 성능 개선이 있어야한다.

1. 대상 함수를 복제하고 질의 목적에 충실한 이름을 짓는다. 
2. 새 질의 함수에서 부수효과를 모두 제거한다.
3. 정적 검사 수행한다.
4. 원 함수를 호출하는 곳을 모두 찾아낸다. 질의하는 함수를 바뀐만큼 수정한다.
5. 원래 함수에서 질의 관련 코드를 제거한다.

### 2. 함수 매개변수화하기
두 함수의 로직이 아주 비슷하고 리터럴 값만 다르다면 그 다른 값만 매개변수로 받아 처리하는 함수 하나로 합쳐 중복을 없앨 수 있다. 

### 3. 플래그 인수 제거하기
플래그 인수란 호출되는 함수가 실행할 로직을 호출하는 쪽에서 선택하기 위해 전달하는 인수다. 
이는 호출할 수 있는 함수들이 무엇이고 어떻게 호출해야하는지를 이해하기가 어려워지는 단점이 있다. 