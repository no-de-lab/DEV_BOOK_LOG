# 16장 국제화

국제화 이슈 
문자집합 인코딩 & 언어 태그

국제적인 콘텐츠을 다루기 위해 필요한 HTTP 지원
- 서버는 클라이언트에게 문서의 문자와 언어를 HTTP Content-Type charset 매개변수와 Content-Language 헤더를 통해 알려줌
- 클라이언트는 서버에게 자신이 어떤 차셋 인코딩 알고리즘들과 언어들을 이해하며 무엇을 선호하는지 말해주기 위해 Accept-Charset과 Accept-Language 헤더를 보냄
- utf-8
  - 한글 인코딩이 안되어서 궭벩뒑 이렇게 이상한 글자를 봤던 것이 기억남

Charset은 글자를 비트로 변환하는 인코딩

문자집합과 인코딩 동작
- 데이터 비트 -> 인코딩 구조 -> 문자코드
  - 문서를 이루는 비트들은 특정 코딩된 문자집합의 특정문자로 식별될 수 있는 문자코드로 변환
- 문자코드 -> 코딩된 문자집합 -> 유일한 문자
  - 문자코드는 코딩된 문자집합의 특정 요소를 선택하기 위해 사용
  - MIME 차셋 태그를 통해 인코딩 알고리즘 결정
- 글꼴과 포매팅 소프트웨어를 사용하여 매칭되는 모양 보여줌


Content-Type charset 헤더와 META 태그
- 웹 서버는 클라이언트에게 MIME 차셋 태그를 charset 매개변수와 함께 Content-Type 헤더에 담아 보냄
- 만약 없는 경우 HTML 콘텐츠에서 태그에서 찾을 수 있음
- HTML이 아니라면, 또는 META Content-Type 태그가 없다면, 일반적인 패턴을 찾기 위해 스캐닝하여 문자 인코딩을 추측 
  - 어떻게 스캐닝? html 아니라면 어떤 문서?
- 클라가 문자 인코딩 추측 못하면 iso-8859-1 (서유럽 문자코드 )
Accept-Charset 헤더  
- HTTP 클라이언트는 서버에게 정확히 어떤 문자 체계를 그들이 지원하는지 Accept-Charset을 통해 알려줌
- Accept-Charset 요청 헤더에 대응하는 Content-Charset는 존재하지 않음


문자집합 용어
- 문자: 유일하고 추상화된 언어의 요소
- 글리프: 하나의 글자를 표현하기 위한 획의 패턴이나 다른 것과 구분되는 `유일한 시각적 형태`
  - 아랍 문자 경우 어디에 위치하냐에 따라 모양이 바뀌는데 이것은 글리프인 것이지 새로운 문자가 아님
  - _이집트 가고 싶다...._
- 코딩된 문자: 글자를 다룰 수 있도록 `각 글자에 할당된 유일한 숫자`
- 코드 공간: 문자 코드값으로 계획해 둔 정수의 범위
- 코드 너비: 각 문자 코드의 비트 개수
- 사용가능 문자집합: 글자들에 대한 특정한 작업 집합
- 코딩된 문자집합: 글자나 기호들의 집합을 정의한 것
- 문자 인코딩 구조

문자 인코딩 구조
- 고정폭
  - 각 코딩된 문자를 고정된 길이의 비트로 표현, 빠르지만 공간 낭비
    - 8비트: 256개 문자의 코드 범위에 대한 문자집합만 지원 (아스키문자)

- 가변폭(비모달) : 
  - 다른 문자 코드 번호에 다른 길이의 비트를 사용
  - 자주 사용 글자의 비트길이를 줄일 수 있음
  - 국제 문자는 여러 바이트를 사용함으로 8비트의 문자 집합과의 호환성도 유지
    - UTF-8
    - euc-jp: iso-2022-jp와 달리 모드 간의 전환을 위한 이스케이프 문자열이 존재하지 않음 (상대적 처리가 단순)
    - euc-kr
- 가변폭(모달)
  - 다른 모드로의 전환을 위해 특별한 excape 패턴 사용
  - 텍스트에서 중첩된 여라 가지 문자 집합 간의 전환을 위해 사용
  - 처리 복잡하지만 복잡한 표기 체계를 효과적으로 지원
    - iso-2022-jp

> 8비트 C언어에서 Char이 8비트를 차지하는 것이 생각남 


국제화된 URI
- 오늘날 URI는 국제화를 지원하지 않음
- 오늘날의 URI는 US-ASCII의 부분집합으로 구성

도메인이름
- 퓨니코드
  - 유니코드 문자열을 호스트 명에서 사용가낭 문자만으로 이루어질 문자열로 변환
  - 한글.com -> xn--blarblar.com



[문자열 인코딩](https://velog.io/@chayezo/%EC%BB%B4%ED%93%A8%ED%84%B0-%EA%B3%B5%ED%95%99-%EA%B8%B0%EC%B4%88-%EB%AC%B8%EC%9E%90%EC%97%B4)
[한글 인코딩의 이해](https://d2.naver.com/helloworld/19187)
[8비트와 아스키 코드와 유니코드](https://blog.naver.com/PostView.naver?blogId=zozokjs&logNo=221206994617&redirect=Dlog&widgetTypeCall=true&directAccess=false)
[퓨니코드](https://carpfish.tistory.com/entry/DNS-%ED%93%A8%EB%8B%88%EC%BD%94%EB%93%9CPunycode-%EB%9E%80-%ED%95%9C%EA%B8%80-%EB%8F%84%EB%A9%94%EC%9D%B8)