# 리다이렉션을 하는 이유
http 메세지가 옮겨다니는 과정에서 많은 프로토콜이 존재한다.
이러한 메세지가 어디에서 끝났는지 확인하기 위해 리다이렉션을 한다.
더불어 최적의 분산된 콘텐츠를 찾는 것을 돕는 기법의 집합이다.
부하 균형도 해야한다.

## 리다이렉션의 방법들
1. http 리다이렉션 
   -> 웹 서버가 다른 곳에 요청을 보내보라고 말해주는 짧은 리다이렉트 메세지를 응답. 
   -> 이는 페이지에 접근할 때 두번 왕복해야한다거나, 리다이렉트 서버가 고장나면 전체가 고장나기에 다른 리다이렉션들과 함께 쓰인다.
2. 도메인 이름 분석할 때, DNS 리다이렉션
   -> 아이피 주소로 분석. 라운드 로빈 방식 제일 많이 사용
   -> 아이피를 돌아가면서 클라이언트에게 보내는 방식, 그러나 다른 방식들도 사용되기는 함.
   -> 분산 호스팅 서버들이 이 방식을 이용한다. 그러나 이 경우 클라이언트 ip가 아니라, 로컬 DNS 서버의 아이피를 이용하기에 정말 분산할 수 있을지에 대한 확신은 없을 것.
3. 임의 캐스트 어드레싱
   -> 백본 라우터의 최단거리에 의존해서, 여러 지리적으로 흩어진 웹 서버가 같은 ip 주소를 가지고 인접한 라우팅 프로토콜과 대화
4. 아이피 맥 포워딩
   -> 패킷은 레이어2장비가 주의를 기울여야하는 맥 주소를 갖고있는데, 특정 맥 주소의 패킷을 받아 나가는 특정 맥 주소로 포워딩한다.
   -> 스위치는 레이어4주소를 검사해 라우팅이 가능하다.
5. 아이피 주소 포워딩
   -> 주소 포워딩은 아이피 주소의 변경에 따라 라우팅하기 때문에, 한 홉 거리에 목적지 서버가 있을 필요는 없다.
   -> 스위치에서 업스트림의 위치를 판별할 수 있으면 일반적인 레이어3 종단간 인터넷 라우팅이 NAT이라는 방식으로 보내준다.
   -> 이 경우 라우팅 대칭성이라는 문제가 생길 수 있으므로, 스위치는 반드시 커넥션을 통해 클라이언트에 응답을 돌려줘야한다.
## 프락시 리다이렉션
1. 명시적
2. 자동 (PAC)
3. 웹 프락시 자동발견 

## 캐시 리다이렉션
1. 캐시 조직 프로토콜
   - 라우터들과 캐시들 사이의 대화 관리
   - 패킷 캡슐화, 클라이언트 아이피 주소 잃어버리지 않음

## 인터넷 캐시 프로토콜
- 캐시들이 형제 캐시에서 일어난 캐시 적중을 찾아볼 수 있게한다.

## 캐시 배열 라우팅 프로토콜
- 프락시 서버 중 하나가 사용할 수 없게 되면, 해시 함수가 수정돼야한다. 
- 프락시 서버의 배열이 클라이언트의 시점에서는 하나의 논리적인 캐시처럼 보이도록 관리해주는 것
- 캐시 비적중이 발생할 시, 해시함수를 통해 특정 프락시 서버에 매핑.

## 하이퍼텍스트 캐싱 프러ㅗ토콜
- ICP는 0.9버전
- 따라서 url로만 리소스 존재 여부를 질의한다.
- 적중이 아님에도 적중으로 잘못 처리될 확률을 줄인다.

