## 1장 네트워크 시작하기

### 데이터 센터 네트워크 
기존에는 3계층 구성이 일반적이었지만 가상화 기술과 높은 대역폭을 요구하는 스케일아웃 기반의 애플리케이션과 서비스가 등장 -> 2계층구성인 스파인-리프 구조로 변화됨

스파인-리프 구조
늘어나는 트래픽 경향을 지원하기 위해 제안됨
10G Base-T 이더넷 포트(기본적 제공) - TOR 스위치(리프)와 연결 - 스파인 스위치와 연결되는 추세

### 프로토콜
현대 네트워크 대부분은 이더넷-TCP/IP 기반 프로토콜
- 물리적 측면: 데이터 전송 매체, 신호 규약. 회선 규격 등 _이더넷_ 
- 논리적 측면 : 장치들끼리 통신하기 위한 프로토콜 규격 _TCP/IP_ 

일반적으로 TCP/IP _프로토콜 스택_ 이라고 부른다

### OSI 7계층 과 TCP/IP
1~4 계층 데이터 플로 게층 / 하위 게층
  데이터를 상대방에게 전달하는 역할
5~7 계층 애플리케이션 계층 / 상위 계층 
  애플리케이션 개발자는 하위 계층 고려하지 않고 데이터를 표현하는 데 초점을 맞춤
애플리케이션 개발자는 하향식, 네트워크 엔지니어는 상향식형식으로 네트워크를 인식함

TCP/IP는 4계층으로 이루어 졌고, 이론보다 실용성에 중점을 둔 프로토콜

### OSI 7계층별 이해하기
- 1계층(피지컬 계층)
물리적 연결과 관련된 정보를 정의. 주로 전기 신호를 전달하는 데 초점이 맞춰짐.
주소의 개념이 없으므로 전기 신호가 들어온 포트를 제외하고 모든 포트에 신호 전송
  - 허브, 리피터 : 네트워크 통신 중재하는 장비 
  - 케이블, 커넥터 : 케이블 본체 구성 하는 요소
  - 트랜시버 : 컨퓨터의 랜카드와 케이블 연결하는 장비
  - 탭 : 네트워크 모니터링과 패킷 분석을 위해 전기 신호를 다른 장비로 복제하는 잩비
  
- 2계층(데이터 링크 계층)
  - 전기 신호를 모아 우리가 알아볼 수 있는 데이터 형태로 처리
  - MAC 주소 체계가 있다.
  - _주소 정보를 정의_ 하고 정확한 주소로 통신이 되도록 하는 데 초점이 맞추어져 있음(출발지와 도착지 주소를 확인)
  - Flow Control : 현재 데이터를 받을 수 있는지 확인하는 역할 
  - 구성요소 : MAC 주소를 이해할 수 있음
    - 네트워크 인터페이스 카드
      - 고유 MAC 주소가 있음. 
      - 전기 신호 형태를 데이터 형태로 만든다.
      - 신호가 맞으면 데이터를 상위계츨에서 처리할 수 있도록 메모리에 적재
    - 스위치
      - 주소 습득 과정에서 단말이 어떤 MAC주소, 연결된 포트를 알 수 있음
      - 이 데이터 기반으로 포트를 적절히 필터링하고 정확한 포트로 포워딩
      - 이더넷 네트워크 효율성 향상
      
- 3계층(네트워크 계층)
  - IP 논리적인 주소가 정의됨
  - 데이터 통신에 2가지 주소가 사용되는데 2계층 MAC주소(물리적)와 3계층의 IP주소(논리적)
  - IP주소는 네트워크 주소 / 호스트 주소 부분으로 나눠지고 사용자가 환경에 맞게 변경하여 사용가능 
  - 라우터(3계층에서 동작하는 장비)
    - IP주소를 사용해 최적의 경로를 찾아주고, 해당 경로로 패킷을 전송하는 역할

- 4계층(트랜스포트 계층)
패킷이 유실되거나, 순서가 바뀌었을 때 바로잡아 주는 역할(정상적으로 잘 보내지도록 확인)
  - 시퀀스 번호 : 패킷에 보내는 순서 명시
  - ACK 번호 : 받는 순서 명시
  - 포트 번호 : 상위 애플리케이션 구분
  - 4계층에서 동작하는 장비 _로드 밸런서_ 와 _방화벽_
  - 포트, 시퀀스, ACK 번호 정보를 이용해 부하를 분산, 보안 정책 수립해 패킷을 통과, 차단 기능 수행

- 5계층(세션 계층)
  - 양 끝단의 응용 프로세스가 연결 / 유지 / 끊는 역할을 함
  - TCP/IP 세션을 만들고 없애는 책임을 진다.(세션을 관리하는 것이 주요 역할)
  - 에러로 중단된 통신에 대한 복구와 재전송 수행

- 6계층(프레젠테이션 계층)
  - 표현방식이 다른 애플리케이션이나 시스템 간의 통신을 톱기 위해 하나의 통일된 구문 형삭으로 변환하는 기능 수행
  - MIME 인코딩이나 암호화, 압축, 코드 변환 같은 것들이 이루어짐

- 7계층(애플리케이션 계층)
  - 애플리케이션 프로세스를 정의하고 서비스를 수행
  - UI, 사용자의 입출력 부분을 정의하는 역할
  - 대표적인 프로토콜 (HTTP, SMTP, FTP)

### 인캡슐레이션과 디캡슐레이션
  인캡슐레이션
  - 데이터를 패킷이라는 작은 단위로 쪼개 보내는 기법
  - (보내는 쪽) 상위 -> 하위 계층 데이터를 보내면, 물리 계층에서 전기 신호 형태로 네트워크를 통해 신호 

  디캡슐레이션
  - (받는 쪽) 하위 -> 상위 계층 데이터 보내는 과정
  - 패킷을 다시 큰 데이터 형태로 결합




