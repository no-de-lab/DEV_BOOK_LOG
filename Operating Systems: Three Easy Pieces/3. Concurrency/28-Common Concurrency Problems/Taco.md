어떤 동시성 버그들이 있을까. 그리고 그 버그를 어떻게 핸들링할 수 있을까.

예전에는 데드락 버그에 신경썼지만, 현재는 데드락이 아닌 버그를 연구한다. 
연구에 따르면, 대부분은 데드락이 아닌 버그다. 

## Non-Deadlock Bugs

### 1. Atomicity-Violation Bugs
- 한 스레드와 다른 스레드의 내용이 대치되어 인터럽트가 일어나면 문제가 생기는 것
- 이를 해결하기 위하여, lock과 unlock을 해당 코드 앞뒤로 넣어준다. 

### 2. Order-Violation Bugs
- 상호 의존 코드로 인하여 널포인터 크래시가 일어날 수 있는 현상. 
- 이를 해결하려면 순서를 강제해주어야한다. 
- 조건 변수가 이를 도와줄 수 있다. 

## Deadlock Bugs
데드락은 한 스레드가 락이 된 상태인데 다른 스레드를 기다리고, 그 스레드는 또 이 스레드를 기다리는 상황이다. 
- 데드락이 일어나는 이유: 
  - 큰 범위의 시스템에서 잘 발생한다. 컴포넌트 사이에서 복잡한 의존성이 생겨나기 때문이다.
  - 캡슐화 때문에 발생하기도 한다. 
    - 디테일을 숨기는 실행방식은 모듈화를 하게 되는데, 이 모듈이라는 건 락과 잘 얽혀들지가 않는다. 

- 데드락 조건
  - 상호 배제
  - hold and wait
  - no preemption
  - circular wait
이 네가지가 다 만들어지는 것이 아니면 데드락이 발생하지 않는다. 따라서 우선 이 조건들이 일어나지 않게끔 생각해보는 것이 중요하다.

### 예방
- circular wait
  - 가장 실용적인 예방법. 순서를 지정해줌으로서 예방이 가능하다. (통째로 지정)
  - 만약 그게 어렵다면 부분적으로 순서를 지어주는 것도 유용하다. 