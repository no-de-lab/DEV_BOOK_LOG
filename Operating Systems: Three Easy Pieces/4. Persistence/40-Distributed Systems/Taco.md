분산 시스템은 세상을 바꾸었다. 복잡한 서비스는 여러 머신들의 협동으로 만들어졌다. 

그러나 분산 시스템은 실패를 어떻게 처리하느냐를 고민해야한다. 
시스템의 오류를 client가 모르게 한다. 
해당 머신이 실패하더라도 시스템은 바로 실패하지않게 되는 것이다. 

- 시스템의 성능도 중요하다. 어떻게 메세지 수를 줄이고 커뮤니케이션도 효율적으로 할지, 
- 보안도 중요하다. 
- 소통도 중요하다. 어떻게 머신들이 소통할지? 

## 1. Communication Basics
기본적으로 소통은 믿을만하지는 않다. 종종 패킷을 잃어버리거나 손상된다. 그는 
- bit flipped
- network link, packet damaged
- network cable 손상 등으로 발생한다.

그러나 그보다 더 근본적으로는 네트워크 스위치나 라우터에서 버퍼링이 부족하기 때문이다. 
패킷이 라우터의 메모리에 도착했으나 메모리가 모든 패킷 저장할 수 없다면? 그냥 패킷을 버려버린다.

## 2. Unreliable Communication layers
그런데 그걸 굳이 해결하려고 하지 않아도 된다. 그러지 않아도 몇몇개기 때문에 굳이 해결하지 않는게 유용할수도 있다. 
- 대표적 예시는 UDP
- socket api로 소통 엔드포인트를 구성하고
- 패킷 로스가 생겨도 보내는 이는 알지 못한다. 

그래도, checksum을 이용해서 훼손은 파악한다. 

## 3. Reliable Communication Layers
그러나, 더 믿을 만한 소통이 필요할 때
msg를 상대가 받은지 아닌지 ack를 통해 알 수 있고, 만약 ack를 못 받았다면 sender가 타이머를 두어서 그 시간내에 들어오지 않았다면 다시 packet을 보낸다.

그러나 여기서 문제는, ack를 보냈음에도 못 받은 경우다. receiver 입장에선 한번만 받고싶었는데 메세지를 두번 이상 받을수도 있다. 

이를 receiver가 처리하기위해서는
- sender msg를 식별할 방법이 있어야한다.
- unique ID를 둘 수도 있으나 이는 비싸다
- sequence counter를 sender, receiver 각각 가지고 서로의 값을 비교한다. 
